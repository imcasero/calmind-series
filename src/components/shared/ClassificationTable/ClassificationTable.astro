---
export interface Player {
  id: number;
  name: string;
  avatar: string;
  pj: number;
  pg: number;
  pp: number;
  points: number;
  isPromoted?: boolean;
  isChampion?: boolean;
}

export interface Props {
  players: Player[];
  showPromotionZones?: boolean;
}

const { players, showPromotionZones = false } = Astro.props;
---

<div class="bg-jacksons-purple-800/80 rounded-lg border-4 border-yellow-400 overflow-hidden shadow-2xl">
  <div class="bg-jacksons-purple-900/90 p-4 border-b-4 border-yellow-400">
    <h3 class="text-yellow-300 drop-shadow-md font-black tracking-wide text-xl">Clasificaci√≥n actual</h3>
  </div>
  
  <div class="overflow-x-auto">
    <table class="w-full">
      <thead class="bg-jacksons-purple-700/80">
        <tr class="text-left border-b-2 border-yellow-400">
          <th class="px-4 py-3 text-yellow-300 drop-shadow font-bold">Pos.</th>
          <th class="px-4 py-3 text-yellow-300 drop-shadow font-bold">Entrenador</th>
          <th class="px-4 py-3 text-yellow-300 drop-shadow font-bold text-center">PJ</th>
          <th class="px-4 py-3 text-yellow-300 drop-shadow font-bold text-center">PG</th>
          <th class="px-4 py-3 text-yellow-300 drop-shadow font-bold text-center">PP</th>
          <th class="px-4 py-3 text-yellow-300 drop-shadow font-bold text-center">Puntos</th>
        </tr>
      </thead>
      <tbody>
        {players.map((player, index) => {
          const position = index + 1;
          const isChampion = player.isChampion;
          const isPromoted = player.isPromoted && !isChampion;
          const isRelegation = showPromotionZones && position > players.length - 2;
          
          let rowClass = "border-b-2 border-jacksons-purple-600/70 hover:bg-jacksons-purple-700/50 transition-colors";
          
          if (isChampion) {
            rowClass += " bg-yellow-900/40 border-yellow-400";
          } else if (isPromoted) {
            rowClass += " bg-green-900/40 border-green-400";
          } else if (isRelegation) {
            rowClass += " bg-red-900/40 border-red-400";
          }
          
          return (
            <tr class={rowClass}>
              <td class="px-4 py-3 text-white drop-shadow font-bold">
                <div class="flex items-center gap-2">
                  {isChampion && <span class="text-yellow-400 text-lg">üëë</span>}
                  {isPromoted && !isChampion && <span class="text-green-400 text-lg">‚¨ÜÔ∏è</span>}
                  <span>{position}</span>
                </div>
              </td>
              <td class="px-4 py-3">
                <div class="flex items-center gap-3">
                  <div class={`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm bg-gradient-to-br from-jacksons-purple-500 to-snuff-500`}>
                    S{player.avatar}
                  </div>
                  <span class="text-white drop-shadow font-bold">{player.name}</span>
                </div>
              </td>
              <td class="px-4 py-3 text-center text-white drop-shadow font-bold">{player.pj}</td>
              <td class="px-4 py-3 text-center text-green-400 drop-shadow font-bold">{player.pg}</td>
              <td class="px-4 py-3 text-center text-red-400 drop-shadow font-bold">{player.pp}</td>
              <td class="px-4 py-3 text-center text-yellow-300 drop-shadow font-black text-lg">{player.points}</td>
            </tr>
          );
        })}
      </tbody>
    </table>
  </div>
  
  <div class="bg-jacksons-purple-900/90 p-4 text-sm text-white/90 border-t-4 border-yellow-400">
    <div class="flex flex-wrap gap-4 justify-center">
      <span class="drop-shadow font-semibold"><strong>PJ:</strong> Partidos jugados</span>
      <span class="drop-shadow font-semibold"><strong>PG:</strong> Partidos ganados</span>
      <span class="drop-shadow font-semibold"><strong>PP:</strong> Partidos perdidos</span>
    </div>
    {showPromotionZones && (
      <div class="flex flex-wrap gap-4 justify-center mt-2 text-xs">
        <span class="flex items-center gap-1">
          <div class="w-3 h-3 bg-yellow-500/50 rounded"></div>
          Zona de campe√≥n
        </span>
        <span class="flex items-center gap-1">
          <div class="w-3 h-3 bg-green-500/50 rounded"></div>
          Zona de ascenso a Primera Divisi√≥n
        </span>
        {players.length > 6 && (
          <span class="flex items-center gap-1">
            <div class="w-3 h-3 bg-red-500/50 rounded"></div>
            Zona de descenso
          </span>
        )}
      </div>
    )}
  </div>
</div>
